!function(){"use strict";var t={832:function(t,e,n){var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,"body{margin:0;display:flex;height:100vh}canvas{border:8px solid;margin:auto;border-radius:20px}",""]),e.Z=a},645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var s=[].concat(t[u]);r&&a[s[0]]||(void 0!==o&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=o),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),i&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=i):s[4]="".concat(i)),e.push(s))}},e}},81:function(t){t.exports=function(t){return t[1]}},379:function(t){var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],l=0;l<t.length;l++){var c=t[l],u=r.base?c[0]+r.base:c[0],s=o[u]||0,f="".concat(u," ").concat(s);o[u]=s+1;var h=n(f),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(d);else{var p=i(d,r);r.byIndex=l,e.splice(l,0,{identifier:f,updater:p,references:1})}a.push(f)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var l=n(o[a]);e[l].references--}for(var c=r(t,i),u=0;u<o.length;u++){var s=n(o[u]);0===e[s].references&&(e[s].updater(),e.splice(s,1))}o=c}}},569:function(t){var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,n){t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nc=void 0,function(){var t=n(379),e=n.n(t),r=n(795),i=n.n(r),o=n(569),a=n.n(o),l=n(565),c=n.n(l),u=n(216),s=n.n(u),f=n(589),h=n.n(f),d=n(832),p={};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(i)?i:String(i)),r)}var i}function y(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function m(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,g(t,e,"get"))}function b(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,g(t,e,"set"),n),n}function g(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}p.styleTagTransform=h(),p.setAttributes=c(),p.insert=a().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=s(),e()(d.Z,p),d.Z&&d.Z.locals&&d.Z.locals;var x=new WeakMap,I=new WeakMap,S=new WeakMap,k=new WeakMap,E=new WeakMap,M=new WeakMap,T=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,x,{writable:!0,value:void 0}),y(this,I,{writable:!0,value:void 0}),y(this,S,{writable:!0,value:void 0}),y(this,k,{writable:!0,value:void 0}),y(this,E,{writable:!0,value:void 0}),y(this,M,{writable:!0,value:void 0}),b(this,x,e),b(this,I,m(this,x).getContext("2d")),b(this,S,m(this,x).width=n),b(this,k,m(this,x).height=r),b(this,E,i),b(this,M,o)}var e,n;return e=t,(n=[{key:"canvas",get:function(){return m(this,x)}},{key:"context",get:function(){return m(this,I)}},{key:"width",get:function(){return m(this,S)}},{key:"height",get:function(){return m(this,k)}},{key:"rowCount",get:function(){return m(this,M)}},{key:"colCount",get:function(){return m(this,E)}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(i)?i:String(i)),r)}var i}function j(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function P(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,A(t,e,"get"))}function O(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,A(t,e,"set"),n),n}function A(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var L=new WeakMap,Z=new WeakMap,N=new WeakMap,z=new WeakMap,R=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,L,{writable:!0,value:void 0}),j(this,Z,{writable:!0,value:void 0}),j(this,N,{writable:!0,value:void 0}),j(this,z,{writable:!0,value:void 0}),O(this,L,e),O(this,Z,new Image),P(this,Z).src=n,P(this,Z).width=O(this,N,r),P(this,Z).height=O(this,z,i)}var e,n;return e=t,(n=[{key:"image",get:function(){return P(this,Z)}},{key:"color",get:function(){return P(this,L)}},{key:"width",get:function(){return P(this,N)}},{key:"height",get:function(){return P(this,z)}}])&&W(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===F(i)?i:String(i)),r)}var i}function U(t,e){q(t,e),e.add(t)}function _(t,e,n){q(t,e),e.set(t,n)}function q(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function B(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function D(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,X(t,e,"get"))}function J(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,X(t,e,"set"),n),n}function X(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Y=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,V=new WeakSet,$=new WeakSet,tt=new WeakSet,et=new WeakSet,nt=new WeakSet,rt=new WeakSet,it=new WeakSet,ot=new WeakSet;function at(){D(this,Y).context.clearRect(0,0,D(this,Y).width,D(this,Y).height)}function lt(){var t=this;B(this,V,at).call(this),D(this,K).forEach((function(e,n){e.forEach((function(e,r){e&&(e.image.complete?D(t,Y).context.drawImage(e.image,r*e.width,n*e.height,e.width,e.height):e.image.addEventListener("load",(function(){D(t,Y).context.drawImage(e.image,r*e.width,n*e.height,e.width,e.height)})))}))}))}function ct(t,e,n,r){var i,o,a,l,c,u,s,f,h=D(this,K)[t][e],d=null,p=null,v=null,w=null;(null===(i=D(this,K)[t-1])||void 0===i||null===(o=i[e])||void 0===o?void 0:o.color)!==h.color||D(this,Q).find((function(n){return n.rowIndex===t-1&&n.cellIndex===e}))||(d={rowIndex:t-1,cellIndex:e},D(this,Q).push(d)),(null===(a=D(this,K)[t+1])||void 0===a||null===(l=a[e])||void 0===l?void 0:l.color)!==h.color||D(this,Q).find((function(n){return n.rowIndex===t+1&&n.cellIndex===e}))||(p={rowIndex:t+1,cellIndex:e},D(this,Q).push(p)),(null===(c=D(this,K)[t])||void 0===c||null===(u=c[e-1])||void 0===u?void 0:u.color)!==h.color||D(this,Q).find((function(n){return n.rowIndex===t&&n.cellIndex===e-1}))||(v={rowIndex:t,cellIndex:e-1},D(this,Q).push(v)),(null===(s=D(this,K)[t])||void 0===s||null===(f=s[e+1])||void 0===f?void 0:f.color)!==h.color||D(this,Q).find((function(n){return n.rowIndex===t&&n.cellIndex===e+1}))||(w={rowIndex:t,cellIndex:e+1},D(this,Q).push(w)),(d||p||v||w)&&(D(this,Q).find((function(n){return n.rowIndex===t&&n.cellIndex===e}))||D(this,Q).push({rowIndex:t,cellIndex:e}),d&&B(this,tt,ct).call(this,d.rowIndex,d.cellIndex),p&&B(this,tt,ct).call(this,p.rowIndex,p.cellIndex),v&&B(this,tt,ct).call(this,v.rowIndex,v.cellIndex),w&&B(this,tt,ct).call(this,w.rowIndex,w.cellIndex))}function ut(){var t=this;D(this,Q).forEach((function(e){var n=e.rowIndex,r=e.cellIndex;return D(t,K)[n][r]=null})),B(this,$,lt).call(this),J(this,Q,[])}function st(){return D(this,G)[Math.floor((D(this,G).length-1)*Math.random())]}function ft(){return D(this,K).flat(1).filter((function(t){return!!t})).length===D(this,Y).rowCount*D(this,Y).colCount}function ht(){for(var t=this,e=function(e){D(t,K)[e].forEach((function(n,r){if(!n)if(0===e)D(t,K)[e][r]=B(t,nt,st).call(t);else{console.log("empty",e,r);for(var i=e-1;i>=0;i--)if(console.log("rowIndexSub",i),D(t,K)[i][r]){D(t,K)[e][r]=D(t,K)[i][r],D(t,K)[i][r]=null;break}}}))},n=D(this,Y).rowCount-1;n>=0;n--)e(n);B(this,$,lt).call(this),console.log(B(this,rt,ft).call(this)),B(this,rt,ft).call(this)||B(this,it,ht).call(this)}function dt(){var t=this;D(this,Y).canvas.addEventListener("click",(function(e){var n=Math.floor(e.offsetX/(D(t,Y).width/D(t,Y).colCount)),r=Math.floor(e.offsetY/(D(t,Y).height/D(t,Y).rowCount));B(t,tt,ct).call(t,r,n),D(t,Q).length&&(B(t,et,ut).call(t),B(t,it,ht).call(t))}))}new(function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,ot),U(this,it),U(this,rt),U(this,nt),U(this,et),U(this,tt),U(this,$),U(this,V),_(this,Y,{writable:!0,value:void 0}),_(this,G,{writable:!0,value:void 0}),_(this,K,{writable:!0,value:void 0}),_(this,Q,{writable:!0,value:[]}),J(this,Y,e),J(this,G,n),J(this,K,Array(D(this,Y).colCount).fill(null).map((function(t,e){return Array(D(r,Y).rowCount).fill(null)})))}var e,n;return e=t,(n=[{key:"init",value:function(){var t=this;D(this,K).forEach((function(e){e.forEach((function(n,r){return e[r]=D(t,G)[Math.ceil(Math.random()*D(t,G).length)-1]}))})),B(this,ot,dt).call(this),B(this,$,lt).call(this)}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())(new T(document.getElementById("canvas"),513,576,9,9),[{color:"blue",src:"/images/items/blue.png"},{color:"purple",src:"/images/items/purple.png"},{color:"red",src:"/images/items/red.png"},{color:"yellow",src:"/images/items/yellow.png"},{color:"green",src:"/images/items/green.png"}].map((function(t){return new R(t.color,t.src,57,64)}))).init()}()}();